<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>LONG BẢO A.I - Cyberpunk Terminal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@400;700&family=Fira+Code:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root {
            --cyan: #00ffff;
            --yellow: #fcee0a;
            --dark-blue: #0A192F; 
            --container-bg: rgba(10, 25, 47, 0.85);
            --border-color: var(--cyan);
            --text-light: #f0f0f0;
            --error-red: #ff3c3c;
            --gold: #FFD700;
            --success-green: #00ff7f;
        }
        html {
            background-color: var(--dark-blue);
        }
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            font-family: 'Rajdhani', sans-serif;
            color: var(--text-light);
            overflow: hidden;
            background-color: transparent;
            cursor: crosshair;
        }
        .hidden { display: none !important; }

        /* --- BACKGROUND & YOUTUBE PLAYER --- */
        .background-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; 
            transition: opacity 0.5s ease;
        }
        #youtube-player {
            position: absolute; top: -9999px; left: -9999px; opacity: 0; pointer-events: none;
        }
        
        /* --- AUTH SCREEN --- */
        #authScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 10; padding: 15px; box-sizing: border-box; transition: opacity 0.5s ease;
        }
        #authScreen.fade-out { opacity: 0; pointer-events: none; }
        #auth-content {
            background: var(--container-bg); border: 2px solid var(--border-color);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2), 0 0 25px var(--border-color);
            width: 100%; max-width: 400px; padding: 30px 25px; text-align: center; position: relative;
        }
        
        /* --- CORNER BRACKETS --- */
        .corner-bracket {
            position: absolute; width: 25px; height: 25px; border-style: solid; border-color: var(--cyan);
            opacity: 0; animation: boot-up 0.6s ease-out forwards, corner-glow 2s infinite alternate;
        }
        @keyframes corner-glow {
            from { box-shadow: 0 0 8px var(--cyan); }
            to { box-shadow: 0 0 18px var(--cyan), 0 0 4px white; }
        }
        .corner-bracket.top-left { top: -2px; left: -2px; border-width: 4px 0 0 4px; animation-delay: 0.2s; }
        .corner-bracket.top-right { top: -2px; right: -2px; border-width: 4px 4px 0 0; animation-delay: 0.3s; }
        .corner-bracket.bottom-left { bottom: -2px; left: -2px; border-width: 0 0 4px 4px; animation-delay: 0.4s; }
        .corner-bracket.bottom-right { bottom: -2px; right: -2px; border-width: 0 4px 4px 0; animation-delay: 0.5s; }

        .boot-anim {
            opacity: 0; transform: translateY(20px); animation: boot-up 0.6s ease-out forwards;
        }
        @keyframes boot-up { to { opacity: 1; transform: translateY(0); } }

        #auth-logo {
            width: 120px; height: 120px; border-radius: 50%; margin-bottom: 20px;
            border: 2px solid var(--yellow); box-shadow: 0 0 20px var(--yellow);
        }

        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; }

        #authScreen h2 {
            font-size: 1.8em; color: var(--yellow);
            text-shadow: 0 0 10px var(--yellow), 0 0 20px var(--cyan);
            margin: 0 0 25px 0; letter-spacing: 2px; min-height: 1.2em;
        }

        #authScreen form { width: 100%; }
        input[type="text"], input[type="password"], input[type="tel"] {
            font-family: 'Rajdhani', sans-serif; font-weight: 700; margin: 10px 0; width: 100%;
            padding: 14px; background: rgba(0,0,0,0.5); color: var(--yellow);
            font-size: 1.1em; border: 1px solid var(--border-color); transition: all .2s ease; box-sizing: border-box;
        }
        input::placeholder { color: rgba(255, 255, 255, 0.4); font-weight: 400; }
        input:focus { outline: none; border-color: var(--yellow); box-shadow: 0 0 15px var(--yellow); }
        
        button, .btn-style {
            font-family: 'Orbitron', sans-serif; font-weight: 700; padding: 15px 20px;
            cursor: pointer; font-size: 1em; text-transform: uppercase; border: none; transition: all .2s ease-out;
            display: inline-block; text-align: center; text-decoration: none;
        }

        .btn-next, #loginBtn, .btn-primary {
            background: var(--cyan); color: var(--dark-blue); box-shadow: 0 0 10px var(--cyan);
            opacity: 0.8; transition: all 0.3s ease; width: 100%;
        }
        .btn-next, #loginBtn { margin-top: 15px; }
        .btn-next:hover, #loginBtn.ready, .btn-primary:hover { opacity: 1; animation: button-glow-cyan 2s infinite alternate; }
        @keyframes button-glow-cyan {
            from { box-shadow: 0 0 10px var(--cyan); }
            to { box-shadow: 0 0 25px var(--cyan), 0 0 10px var(--cyan); }
        }
        .btn-next:hover, #loginBtn:hover:not(:disabled), .btn-primary:hover {
            background: var(--yellow); color: var(--dark-blue); animation-play-state: paused; box-shadow: 0 0 25px var(--yellow);
        }

        #registerBtn {
            background: var(--yellow); color: var(--dark-blue); transform: scale(1.05);
            animation: button-glow-yellow 1.5s infinite alternate;
        }
        @keyframes button-glow-yellow {
            from { box-shadow: 0 0 15px var(--yellow); transform: scale(1.05); }
            to { box-shadow: 0 0 35px var(--yellow), 0 0 10px var(--yellow); transform: scale(1.1); }
        }
        #registerBtn:hover:not(:disabled) {
            background: var(--yellow); color: var(--dark-blue); animation-play-state: paused;
            transform: scale(1.15); box-shadow: 0 0 40px var(--yellow);
        }

        button:active:not(:disabled) { transform: scale(0.95) !important; }
        button:disabled { background: #555; color: #888; cursor: not-allowed; animation: none; box-shadow: none; }
        
        .auth-error { color: var(--error-red); margin-top: 15px; height: 1em; font-size: 0.9em; }
        .auth-switch { margin-top: 20px; font-size: 1em; }
        .auth-switch a { color: var(--cyan); text-decoration: none; cursor: pointer; transition: all 0.3s ease; }
        .auth-switch a:hover { color: var(--yellow); text-decoration: underline;}

        .f168-banner {
            display: block; text-decoration: none; color: var(--error-red); font-weight: 700;
            margin-top: 15px; padding: 10px; border: 1px solid var(--error-red);
            text-shadow: 0 0 5px var(--error-red); font-size: 0.9em; line-height: 1.4;
            cursor: pointer; transition: all 0.2s ease;
            animation: boot-up 0.6s ease-out forwards, warning-blink 1.2s infinite 0.6s;
        }
        @keyframes warning-blink {
            0%, 100% { background-color: rgba(255, 60, 60, 0.15); box-shadow: 0 0 8px rgba(255, 60, 60, 0.7); }
            50% { background-color: rgba(255, 60, 60, 0.3); box-shadow: 0 0 18px var(--error-red); }
        }
        .f168-banner:hover { background-color: rgba(255, 60, 60, 0.5); color: var(--text-light); text-shadow: 0 0 10px var(--text-light); animation-play-state: paused; }

        /* --- MÀN HÌNH CHỌN LÕI A.I --- */
        #aiCoreSelectionScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 3; padding: 15px; box-sizing: border-box;
            padding-top: 80px; opacity: 0; transition: opacity 0.5s ease;
        }
        #aiCoreSelectionScreen.fade-in { opacity: 1; }
        #user-info-bar {
            position: absolute; top: 15px; left: 15px; right: 15px; background: var(--container-bg);
            border: 1px solid var(--cyan); padding: 8px 15px; display: flex; justify-content: space-between;
            align-items: center; font-family: 'Orbitron', sans-serif; font-size: 0.9em;
            box-shadow: 0 0 10px var(--cyan); transition: border-color 0.5s ease, box-shadow 0.5s ease;
        }
        #user-info-left { display: flex; align-items: center; gap: 10px; }
        #user-avatar {
            width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--cyan); object-fit: cover;
        }
        #user-info-bar span { text-shadow: 0 0 5px var(--cyan); }
        #user-energy { color: var(--yellow); text-shadow: 0 0 5px var(--yellow); transition: color 0.5s ease, text-shadow 0.5s ease; }
        #user-energy.high { color: var(--success-green); text-shadow: 0 0 8px var(--success-green); }
        #user-energy.low { color: var(--error-red); text-shadow: 0 0 8px var(--error-red); }
        #user-info-bar.low-energy { border-color: var(--error-red); box-shadow: 0 0 15px var(--error-red); animation: warning-blink 1.2s infinite; }
        #user-controls { display: flex; align-items: center; gap: 10px; }
        .control-btn {
            background: transparent; border: 1px solid var(--cyan); color: var(--cyan);
            padding: 8px; font-size: 0.8em; line-height: 1; border-radius: 5px;
        }
        .control-btn:hover { background: var(--cyan); color: var(--dark-blue); }
        .control-btn svg { width: 16px; height: 16px; fill: currentColor; }

        #aiCoreSelectionScreen h1 {
            color: var(--cyan); text-shadow: 0 0 15px var(--cyan); 
            font-size: 1.5em; margin-bottom: 20px; text-align: center;
        }
        
        #core-selector {
            display: flex; align-items: center; justify-content: space-between;
            width: 100%; max-width: 400px;
        }

        .core-nav-btn {
            background: transparent; border: 2px solid var(--cyan); color: var(--cyan); font-size: 2em;
            width: 40px; height: 40px; display: flex; justify-content: center; align-items: center;
            line-height: 1; padding: 0; border-radius: 50%; text-shadow: 0 0 8px var(--cyan); flex-shrink: 0;
        }
        .core-nav-btn:hover { background: var(--cyan); color: var(--dark-blue); }

        #core-options-container {
            width: calc(100% - 100px); height: 400px; position: relative;
            overflow: hidden; margin: 0 10px;
        }

        .core-option {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--container-bg);
            border: 2px solid var(--border-color); box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.2), 0 0 15px var(--border-color);
            padding: 15px; text-align: center; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
            transition: transform 0.5s ease, opacity 0.5s ease; opacity: 0; transform: scale(0.9);
            display: none; box-sizing: border-box;
        }
        .core-option.active {
            opacity: 1; transform: scale(1); z-index: 2; display: flex;
            flex-direction: column; justify-content: flex-start;
        }

        .core-option h3 { color: var(--yellow); font-size: 1.2em; margin: 0 0 10px 0; flex-shrink: 0; }
        .gif-container {
            width: 100%; padding-bottom: 75%; height: 0; position: relative;
            background-color: rgba(0,0,0,0.3); border: 1px solid var(--border-color);
            margin-bottom: 10px; flex-shrink: 0;
        }
        .gif-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .core-description {
            font-size: 0.85em; color: var(--text-light); line-height: 1.4; opacity: 0.9;
            font-weight: 400; text-align: center; margin: 0; flex-grow: 1; overflow-y: auto;
        }
        #main-next-btn { margin-top: 15px; max-width: 400px; }
        
        /* --- PROMO BANNER --- */
        #promo-banner {
            width: 100%; max-width: 400px; margin-top: 15px; padding: 10px; background: rgba(255, 215, 0, 0.1);
            border: 1px solid var(--gold); box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); display: flex;
            justify-content: space-between; align-items: center; box-sizing: border-box; animation: promo-glow 2s infinite alternate;
        }
        @keyframes promo-glow {
            from { box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
            to { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), inset 0 0 10px rgba(255, 215, 0, 0.3); }
        }
        #promo-text {
            color: var(--gold); text-decoration: none; font-weight: 700; font-size: 0.8em;
            text-align: left; flex-grow: 1; text-shadow: 0 0 5px var(--gold);
        }
        #promo-spinner-link { flex-shrink: 0; margin-left: 10px; }
        #promo-spinner { width: 40px; height: 40px; cursor: pointer; }
        .spinner-wheel { animation: spin 4s linear infinite; transform-origin: 50% 50%; }
        #promo-spinner:hover .spinner-wheel { animation-duration: 1s; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* --- MÀN HÌNH KÍCH HOẠT ULTIMATE --- */
        #activationScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            z-index: 20; display: flex; justify-content: center; align-items: center;
            font-family: 'Fira Code', monospace;
            padding: 15px; box-sizing: border-box;
            opacity: 0; transition: opacity 0.5s ease;
        }
        #activationScreen.visible { opacity: 1; }
        #activation-hud {
            width: 100%; height: 100%;
            max-width: 800px; max-height: 1200px;
            display: grid;
            grid-template-rows: auto 1fr auto;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 15px;
            position: relative;
        }
        .hud-panel {
            border: 1px solid rgba(0, 255, 255, 0.3);
            padding: 10px;
            position: relative;
            background: rgba(10, 25, 47, 0.3);
        }
        #hud-header { grid-column: 1 / 4; text-align: center; }
        #hud-header h1 {
            font-size: clamp(1.5em, 5vw, 2.5em);
            color: var(--yellow); text-shadow: 0 0 15px var(--yellow);
            margin: 0; animation: text-flicker 4s linear infinite;
        }
        #hud-left-panel, #hud-right-panel {
            display: flex; flex-direction: column; gap: 10px;
            font-size: clamp(0.7em, 2vw, 0.9em);
        }
        .data-stream {
            height: 100%; overflow: hidden;
            white-space: pre;
        }
        .data-stream span { display: block; }
        #hud-center-panel {
            grid-row: 2 / 3; grid-column: 2 / 3;
            display: flex; flex-direction: column; justify-content: space-between; align-items: center;
        }
        #core-3d-container {
            width: 100%;
            flex-grow: 1;
            min-height: 150px;
        }
        #activation-status { text-align: center; width: 100%; padding-bottom: 10px; }
        #activation-status-text { font-size: 1.2em; height: 1.5em; color: var(--text-light); }
        .progress-bar-container { width: 100%; height: 10px; border: 1px solid var(--cyan); margin-top: 10px; padding: 2px; }
        .progress-bar-fill { width: 0%; height: 100%; background: var(--cyan); transition: width 0.5s ease-out; box-shadow: 0 0 10px var(--cyan); }

        #hud-footer {
            grid-column: 1 / 4;
            display: flex; justify-content: center;
        }
        #cancel-activation-btn {
            background: transparent; border: 1px solid var(--error-red); color: var(--error-red);
            padding: 10px 30px;
        }
        #cancel-activation-btn:hover { background: var(--error-red); color: var(--dark-blue); }

        .system-check-item {
            opacity: 0.5; transition: opacity 0.5s, color 0.5s;
        }
        .system-check-item.online {
            opacity: 1; color: var(--success-green);
        }
        
        /* --- YIAN CORE SCREEN --- */
        #yianCoreScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--yian-bg-color); z-index: 25;
            padding: 15px; box-sizing: border-box;
            opacity: 0; transition: opacity 0.5s ease;
            display: none; /* Hidden by default */
        }
        #yianCoreScreen.visible { 
            display: block;
            opacity: 1; 
        }
        #yian-app-container {
            width: 100%;
            height: 100%;
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            gap: 20px;
            grid-template-columns: 300px 1fr 300px;
            grid-template-rows: auto 1fr auto;
            grid-template-areas:
                "yian-header yian-header yian-header"
                "yian-left yian-main yian-right"
                "yian-footer yian-footer yian-footer";
        }
        .yian-panel {
            background: var(--yian-container-bg);
            border-radius: 15px;
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5), 
                        inset 0 1px 1px rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            overflow: hidden;
            position: relative;
            border: 2px solid transparent;
        }
        .yian-panel-title {
            font-size: 1.2em; font-weight: 700; color: var(--yian-secondary);
            letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px;
            text-shadow: 0 0 4px rgba(0,0,0,0.5); border-bottom: 1px solid var(--yian-border);
            padding-bottom: 10px;
        }
        #yian-header { grid-area: yian-header; text-align: center; }
        #yian-header h1 {
            font-size: 2.5em; font-weight: 700; letter-spacing: 8px;
            background: linear-gradient(45deg, var(--yian-prism-1), var(--yian-prism-2), var(--yian-prism-3));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 15px var(--yian-prism-1));
        }
        #yian-left-panel { grid-area: yian-left; }
        #yian-main-panel { grid-area: yian-main; }
        #yian-right-panel { grid-area: yian-right; }
        #yian-footer { grid-area: yian-footer; text-align: center; color: rgba(193, 215, 224, 0.4); }
        #yian-scan-button {
            width: 80%; max-width: 400px; padding: 15px; font-size: 1.5em;
            font-weight: 700; letter-spacing: 3px; color: #fff;
            background: linear-gradient(45deg, var(--yian-prism-1), var(--yian-prism-2), var(--yian-prism-3));
            background-size: 200% 200%; border: none; border-radius: 10px;
            cursor: pointer; transition: all 0.3s ease;
            text-shadow: 0 1px 5px rgba(0,0,0,0.4); position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4), inset 0 1px 2px rgba(255,255,255,0.2);
            animation: gradient-pan 5s ease infinite;
        }
        @keyframes gradient-pan {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        #yian-result-display { background: rgba(0,0,0,0.3); border: 1px solid var(--yian-border); border-radius: 10px; padding: 15px; text-align: center; min-height: 150px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #yian-result-text { font-family: 'Share Tech Mono', monospace; font-size: 2.2em; font-weight: 700; letter-spacing: 2px; color: var(--success-green); text-shadow: 0 0 10px var(--success-green); min-height: 40px; }
        #yian-secondary-result-text { font-family: 'Rajdhani', sans-serif; font-size: 1.2em; font-weight: 500; color: var(--warning-color); text-shadow: 0 0 8px var(--warning-color); margin-top: 5px; min-height: 20px; }
        #yian-energy-bar-outer { width: 100%; height: 15px; background: rgba(0,0,0,0.4); border: 1px solid var(--yian-border); border-radius: 8px; padding: 2px; }
        #yian-energy-bar-inner { width: 100%; height: 100%; background: linear-gradient(45deg, var(--yian-prism-1), var(--yian-prism-2), var(--yian-prism-3)); border-radius: 5px; transition: width 0.5s, background 0.5s; box-shadow: 0 0 8px var(--success-green); }
        #yian-energy-percent-text { font-family: 'Share Tech Mono', monospace; font-size: 1.2em; margin-top: 8px; color: var(--yian-secondary); }
        #yian-exit-button {
            position: absolute; top: 20px; right: 20px;
            background: transparent; border: 1px solid var(--error-red); color: var(--error-red);
            padding: 5px 10px; z-index: 1000;
        }

        /* --- MODALS --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(10, 25, 47, 0.9);
            backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); display: flex;
            justify-content: center; align-items: center; z-index: 15; padding: 15px; box-sizing: border-box;
        }
        .modal-content {
            background: var(--container-bg); border: 2px solid var(--gold);
            box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.3), 0 0 35px var(--gold);
            width: 100%; max-width: 450px; padding: 30px 25px; text-align: center; position: relative;
        }
        .modal-content.warning {
            border-color: var(--error-red); box-shadow: inset 0 0 20px rgba(255, 60, 60, 0.3), 0 0 35px var(--error-red);
            font-family: 'Fira Code', monospace;
        }
        .modal-content.warning h3 {
            color: var(--error-red); text-shadow: 0 0 15px var(--error-red), 0 0 5px #fff;
            animation: text-flicker 3s linear infinite; font-size: 1.4em; letter-spacing: 2px;
        }
        .modal-content.warning p { font-size: 1em; line-height: 1.6; text-shadow: 0 0 5px var(--error-red); opacity: 0.9; }
        .modal-content h3 { color: var(--gold); text-shadow: 0 0 10px var(--gold); margin-top: 0; }
        .modal-content p { margin-bottom: 20px; opacity: 0.9; }
        #aquarius-code-input { border-color: var(--gold); color: var(--gold); }
        #aquarius-code-input:focus { border-color: var(--yellow); box-shadow: 0 0 15px var(--yellow); }
        .modal-buttons { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .modal-buttons button, .modal-buttons a { width: 100%; box-sizing: border-box; }
        #confirm-aquarius-code { background: var(--gold); color: var(--dark-blue); box-shadow: 0 0 15px var(--gold); }
        #contact-for-code { border: 1px solid var(--cyan); color: var(--cyan); }
        .close-modal-btn {
            position: absolute; top: 10px; right: 10px; background: transparent; border: none;
            color: var(--text-light); font-size: 1.5em; padding: 5px; line-height: 1;
        }
        @keyframes text-flicker {
            0% { opacity: 0.1; } 2% { opacity: 1; } 8% { opacity: 0.1; } 9% { opacity: 1; } 12% { opacity: 0.2; }
            20% { opacity: 1; } 25% { opacity: 0.3; } 30% { opacity: 1; } 70% { opacity: 0.7; } 72% { opacity: 0.2; }
            77% { opacity: .9; } 100% { opacity: .9; }
        }

        /* --- PROFILE MODAL STYLES --- */
        #profile-modal .modal-content {
            border-color: var(--cyan); box-shadow: inset 0 0 20px rgba(0, 255, 255, 0.3), 0 0 35px var(--cyan);
        }
        #profile-modal h3 { color: var(--cyan); text-shadow: 0 0 10px var(--cyan); }
        .profile-tabs { display: flex; border-bottom: 1px solid var(--cyan); margin-bottom: 20px; }
        .profile-tab {
            padding: 10px 15px; cursor: pointer; color: var(--cyan); opacity: 0.6;
            border: none; background: transparent; font-family: 'Orbitron', sans-serif;
        }
        .profile-tab.active { opacity: 1; border-bottom: 2px solid var(--yellow); }
        .profile-tab-content { display: none; }
        .profile-tab-content.active { display: block; }
        .profile-avatar-section { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; }
        #profile-avatar-preview {
            width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--cyan);
            box-shadow: 0 0 15px var(--cyan); object-fit: cover; margin-bottom: 15px;
        }
        .profile-form-group { text-align: left; margin-bottom: 15px; }
        .profile-form-group label {
            display: block; margin-bottom: 5px; font-family: 'Orbitron', sans-serif;
            font-size: 0.9em; color: var(--cyan);
        }
        .profile-form-group small { font-size: 0.8em; opacity: 0.7; display: block; margin-top: 4px; }
        #lucky-spin-btn {
            background: var(--gold); color: var(--dark-blue); box-shadow: 0 0 15px var(--gold);
            animation: button-glow-yellow 1.5s infinite alternate;
        }
        #activity-log-container {
            max-height: 250px; overflow-y: auto; text-align: left;
            font-family: 'Fira Code', monospace; font-size: 0.9em;
            border: 1px solid rgba(0, 255, 255, 0.2); padding: 10px;
        }
        .log-entry { margin-bottom: 8px; }
        .log-timestamp { color: var(--yellow); opacity: 0.8; margin-right: 10px; }

        /* --- NOTIFICATION SYSTEM --- */
        #notification-container {
            position: fixed; top: 20px; right: 20px; z-index: 100;
            display: flex; flex-direction: column; gap: 10px;
        }
        .notification {
            padding: 15px 20px; border-left: 5px solid; width: 300px;
            background: var(--container-bg); backdrop-filter: blur(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: slideIn 0.5s ease forwards, fadeOut 0.5s ease 4.5s forwards;
        }
        .notification.success { border-color: var(--success-green); color: var(--success-green); }
        .notification.error { border-color: var(--error-red); color: var(--error-red); }
        .notification.info { border-color: var(--cyan); color: var(--cyan); }
        @keyframes slideIn { from { transform: translateX(110%); } to { transform: translateX(0); } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateX(110%); } }

        /* --- COPYRIGHT & TELEGRAM --- */
        #copyright, #contact-link { z-index: 5; }
        #copyright { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); font-size: 0.8em; color: rgba(255, 255, 255, 0.4); }
        #contact-link { position: fixed; bottom: 15px; right: 15px; display: flex; align-items: center; text-decoration: none; color: var(--cyan); }
        #contact-link svg { width: 32px; height: 32px; fill: var(--cyan); filter: drop-shadow(0 0 5px var(--cyan)); transition: all 0.3s ease; }
        #contact-link span { margin-right: 10px; font-weight: 700; opacity: 0; transition: all 0.3s ease; transform: translateX(10px); }
        #contact-link:hover svg { fill: var(--yellow); filter: drop-shadow(0 0 10px var(--yellow)); }
        #contact-link:hover span { opacity: 1; transform: translateX(0); color: var(--yellow); }
    </style>
</head>
<body>
    <!-- Nền hiệu ứng -->
    <canvas id="matrix-bg" class="background-canvas"></canvas>
    <div id="youtube-player"></div>
    <div id="notification-container"></div>
    
    <!-- Màn hình đăng nhập / đăng ký -->
    <div id="authScreen" class="hidden">
        <div id="auth-content">
            <div class="corner-bracket top-left"></div> <div class="corner-bracket top-right"></div>
            <div class="corner-bracket bottom-left"></div> <div class="corner-bracket bottom-right"></div>
            <img id="auth-logo" class="boot-anim" src="https://i.ibb.co/RkhcqgKC/LOGO.png" alt="Logo" style="animation-delay: 0.2s;">
            <div id="form-container">
                <form id="loginForm">
                    <h2 data-text="ĐĂNG NHẬP"></h2>
                    <div class="boot-anim" style="animation-delay: 0.8s;"><input type="text" id="login-username" placeholder="TÊN TÀI KHOẢN" required></div>
                    <div class="boot-anim" style="animation-delay: 1.0s;"><input type="password" id="login-password" placeholder="MẬT KHẨU" required></div>
                    <div class="boot-anim" style="animation-delay: 1.2s;"><button type="submit" id="loginBtn">KẾT NỐI</button></div>
                    <p class="auth-switch boot-anim" style="animation-delay: 1.4s;">Chưa có tài khoản? <a id="showRegisterLink">Đăng ký</a></p>
                    <a href="http://www.f168.codes" target="_blank" class="f168-banner boot-anim" style="animation-delay: 1.5s;">TOOL CHỈ HOẠT ĐỘNG VỚI TÀI KHOẢN ĐĂNG KÍ TẠI SẢNH F168.CODES</a>
                </form>
                <form id="registerForm" class="hidden">
                    <h2 data-text="ĐĂNG KÝ"></h2>
                    <div class="boot-anim"><input type="text" id="register-username" placeholder="TÊN TÀI KHOẢN" required></div>
                    <div class="boot-anim" style="animation-delay: 0.1s;"><input type="tel" id="register-phone" placeholder="SỐ ĐIỆN THOẠI" required></div>
                    <div class="boot-anim" style="animation-delay: 0.2s;"><input type="password" id="register-password" placeholder="MẬT KHẨU" required></div>
                    <div class="boot-anim" style="animation-delay: 0.3s;"><button type="submit" id="registerBtn">TẠO MỚI</button></div>
                    <p class="auth-switch boot-anim" style="animation-delay: 0.4s;">Đã có tài khoản? <a id="showLoginLink">Đăng nhập</a></p>
                </form>
            </div>
        </div>
    </div>

    <!-- Màn hình chọn lõi A.I -->
    <div id="aiCoreSelectionScreen" class="hidden">
        <div id="user-info-bar" class="hidden">
            <div id="user-info-left">
                <img id="user-avatar" src="https://placehold.co/50x50/0A192F/00ffff?text=P" alt="User Avatar">
                <div>
                    <span id="user-pilot">PILOT:</span><br>
                    <span id="user-energy">ENERGY:</span>
                </div>
            </div>
            <div id="user-controls">
                <button id="profile-btn" class="control-btn" title="Hồ sơ">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
                </button>
                <button id="logout-btn" class="control-btn" title="Đăng xuất">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/></svg>
                </button>
            </div>
        </div>
        <h1 data-text="CHỌN LÕI A.I"></h1>
        <div id="core-selector">
            <button id="prev-core-btn" class="core-nav-btn">&lt;</button>
            <div id="core-options-container">
                <div class="core-option">
                    <h3>LongBao Thế Hệ IV</h3>
                    <div class="gif-container"><iframe src="https://giphy.com/embed/ws8l2aiUiFudsACu5u" frameBorder="0" class="giphy-embed" allowFullScreen></iframe></div>
                    <p class="core-description">Được phát triển từ các GPU Ndivia thế hệ mới, xâm nhập vô sảnh game để phân tích và đưa ra lựa chọn tốt nhất cho người dùng.</p>
                </div>
                <div class="core-option">
                    <h3>Yian Soi Lá Bài</h3>
                    <div class="gif-container"><iframe src="https://giphy.com/embed/3Ipz588z9HiqP5sD5t" frameBorder="0" class="giphy-embed" allowFullScreen></iframe></div>
                    <p class="core-description">Công nghệ tương lai độc quyền - được phát triển từ hệ thống SVB nổi tiếng của các hacker. Giờ đây soi lá bài không phải là tưởng tượng nữa!</p>
                </div>
                <div class="core-option">
                    <h3>Siêu Lõi Aquarius</h3>
                    <div class="gif-container"><iframe src="https://giphy.com/embed/h88FMNUACANfKcsXFq" frameBorder="0" class="giphy-embed" allowFullScreen></iframe></div>
                    <p class="core-description">Được tạo lên từ A.I thông minh nhất thế giới Grok IV - Tỉ lệ thắng 99%. X1000 lần tài khoản trong 1 đêm không còn là mơ.</p>
                </div>
            </div>
            <button id="next-core-btn" class="core-nav-btn">&gt;</button>
        </div>
        <button id="main-next-btn" class="btn-next">KÍCH HOẠT LÕI</button>
        <div id="promo-banner">
            <a href="https://www.f168a2.net/home/register?id=409098214&currency=VND" target="_blank" id="promo-text">ĐĂNG KÍ NẠP ĐẦU 8888K - TẶNG VÒNG XOAY MAY MẮN</a>
            <a href="https://vongxoaylongbao.site/" target="_blank" id="promo-spinner-link"><svg id="promo-spinner" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="gold-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color: #fcee0a; stop-opacity: 1" /><stop offset="100%" style="stop-color: #ffd700; stop-opacity: 1" /></linearGradient></defs><g class="spinner-wheel"><circle cx="50" cy="50" r="25" fill="transparent" stroke="#E74C3C" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(-90 50 50)"/><circle cx="50" cy="50" r="25" fill="transparent" stroke="#F1C40F" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(-30 50 50)"/><circle cx="50" cy="50" r="25" fill="transparent" stroke="#2ECC71" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(30 50 50)"/><circle cx="50" cy="50" r="25" fill="transparent" stroke="#3498DB" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(90 50 50)"/><circle cx="50" cy="50" r="25" fill="transparent" stroke="#9B59B6" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(150 50 50)"/><circle cx="50" cy="50" r="25" fill="transparent" stroke="#1ABC9C" stroke-width="50" stroke-dasharray="26.18 157.08" transform="rotate(210 50 50)"/></g><circle cx="50" cy="50" r="48" fill="none" stroke="url(#gold-gradient)" stroke-width="4"/><path d="M50,0 L45,15 L55,15 Z" fill="var(--gold)" stroke="var(--dark-blue)" stroke-width="1" /><circle cx="50" cy="50" r="12" fill="var(--dark-blue)" stroke="var(--gold)" stroke-width="2"/><circle cx="50" cy="50" r="8" fill="var(--gold)"/></svg></a>
        </div>
    </div>

    <!-- Modals -->
    <div id="aquarius-modal" class="modal-overlay hidden"><div class="modal-content"><button class="close-modal-btn">X</button><h3>Kích hoạt Siêu Lõi Aquarius</h3><p>VUI LÒNG NHẬP MÃ KÍCH HOẠT AQUARIUS</p><input type="text" id="aquarius-code-input" placeholder="MÃ KÍCH HOẠT"><p id="aquarius-error" class="auth-error"></p><div class="modal-buttons"><button id="confirm-aquarius-code" class="btn-style">XÁC NHẬN NHẬP MÃ</button><a href="https://t.me/longbaoF168" target="_blank" id="contact-for-code" class="btn-style">LIÊN HỆ LONG BẢO</a></div></div></div>
    <div id="low-energy-modal" class="modal-overlay hidden"><div class="modal-content warning"><button class="close-modal-btn">X</button><h3>CẢNH BÁO NĂNG LƯỢNG THẤP</h3><p>LÕI A.I ĐANG HẾT NĂNG LƯỢNG - HÃY RÚT RA NẠP LẠI ĐỂ HỒI PHỤC LÕI</p><div class="modal-buttons"><button class="close-modal-btn btn-style" style="position: static;">ĐÃ HIỂU</button></div></div></div>
    <div id="profile-modal" class="modal-overlay hidden"><div class="modal-content"><button class="close-modal-btn">X</button><h3>HỒ SƠ PILOT</h3><div class="profile-tabs"><button class="profile-tab active" data-tab="profile-info">Thông tin</button><button class="profile-tab" data-tab="profile-security">Bảo mật</button><button class="profile-tab" data-tab="profile-log">Nhật ký</button></div><div id="profile-info" class="profile-tab-content active"><form id="profile-form"><div class="profile-avatar-section"><img id="profile-avatar-preview" src="https://placehold.co/100x100/0A192F/00ffff?text=P" alt="Profile Avatar"><div class="profile-form-group" style="width: 100%;"><label for="profile-avatar-url">URL Ảnh Đại Diện</label><input type="text" id="profile-avatar-url" placeholder="https://example.com/image.png"></div></div><div class="profile-form-group"><label for="profile-f168-username">Tên Tài Khoản F168</label><input type="text" id="profile-f168-username" placeholder="Nhập tên tài khoản F168"><small>Chỉ được đổi 2 lần/tháng, mỗi lần cách nhau 15 ngày.</small></div><div class="profile-form-group"><label for="profile-phone">Số Điện Thoại</label><input type="tel" id="profile-phone" placeholder="Nhập số điện thoại"></div><div class="modal-buttons"><button type="submit" id="save-profile-btn" class="btn-primary">LƯU THAY ĐỔI</button><a href="https://vongxoaylongbao.site" target="_blank" id="lucky-spin-btn" class="btn-style">VÒNG XOAY MAY MẮN</a></div></form></div><div id="profile-security" class="profile-tab-content"><form id="change-password-form"><div class="profile-form-group"><label for="current-password">Mật khẩu hiện tại</label><input type="password" id="current-password" required></div><div class="profile-form-group"><label for="new-password">Mật khẩu mới</label><input type="password" id="new-password" required></div><div class="modal-buttons"><button type="submit" class="btn-primary">ĐỔI MẬT KHẨU</button></div></form></div><div id="profile-log" class="profile-tab-content"><div id="activity-log-container"><p>Đang tải nhật ký...</p></div></div></div></div>

    <!-- Màn hình Kích hoạt Ultimate -->
    <div id="activationScreen" class="hidden">
        <div id="activation-hud">
            <header id="hud-header">
                <h1>A.I. CORE ACTIVATION</h1>
            </header>
            <aside id="hud-left-panel" class="hud-panel">
                <h3>SYSTEM CHECK</h3>
                <div id="system-check-list"></div>
            </aside>
            <main id="hud-center-panel" class="hud-panel">
                <div id="core-3d-container"></div>
                <div id="activation-status">
                    <h2 id="activation-core-name"></h2>
                    <p id="activation-status-text"></p>
                    <div class="progress-bar-container">
                        <div id="activation-progress-bar" class="progress-bar-fill"></div>
                    </div>
                </div>
            </main>
            <aside id="hud-right-panel" class="hud-panel">
                <h3>DATA STREAM</h3>
                <div id="data-stream" class="data-stream"></div>
            </aside>
            <footer id="hud-footer">
                <button id="cancel-activation-btn" class="btn-style">HỦY BỎ</button>
            </footer>
        </div>
    </div>

    <!-- Màn hình Lõi Yian -->
    <div id="yianCoreScreen" class="hidden">
        <button id="yian-exit-button" class="btn-style">THOÁT LÕI YIAN</button>
        <div id="yian-app-container">
            <header id="yian-header" class="yian-panel">
                <h1>YIAN A.I. COMMAND CENTER</h1>
            </header>
            <div id="yian-left-panel" class="yian-panel">
                <h2 class="yian-panel-title">LÕI PHÂN TÍCH</h2>
                <div id="yian-core-selector"></div>
                <div id="yian-energy-display">
                    <h3 class="yian-panel-title" style="margin-top: 20px; border:none; padding:0; margin-bottom: 5px;">NĂNG LƯỢNG HỆ THỐNG</h3>
                    <div id="yian-energy-bar-outer">
                        <div id="yian-energy-bar-inner"></div>
                    </div>
                    <p id="yian-energy-percent-text">100%</p>
                </div>
            </div>
            <div id="yian-main-panel" class="yian-panel">
                 <div class="main-display-grid">
                    <div id="yian-camera-view"></div>
                    <div id="yian-holo-container"></div>
                </div>
                <div class="scan-controls">
                    <div id="yian-result-display">
                        <h2 id="yian-result-text">-- CHỜ LỆNH --</h2>
                        <h3 id="yian-secondary-result-text"></h3>
                    </div>
                    <button id="yian-scan-button" class="btn-style">KHỞI TẠO QUÉT</button>
                </div>
            </div>
            <div id="yian-right-panel" class="yian-panel">
                <h3 class="yian-panel-title">NHẬT KÝ HỆ THỐNG</h3>
                <div id="yian-system-log" class="data-stream"></div>
            </div>
            <footer id="yian-footer">
                © Bản quyền thuộc về Long Bảo
            </footer>
        </div>
    </div>
    
    <footer id="copyright">BẢN QUYỀN THUỘC VỀ LONG BẢO</footer>
    <a id="contact-link" href="https://t.me/longbaoF168" target="_blank"><span>LIÊN HỆ LONG BẢO</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.2-61.756,68.973-66.107,2.174-5.327.34-8.28-2.063-10.423-2.403-2.143-5.48-1.922-8.262-.973l-73.22,47.052-37.424-11.948c-13.385-4.278-23.215-6.469-23.215-15.045,0-8.173,6.7-13.218,19.967-18.071,46.5-16.979,100.013-33.507,139.14-47.785,13.87-5.021,26.124,2.756,22.399,28.857Z"/></svg></a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut,
            EmailAuthProvider, reauthenticateWithCredential, updatePassword
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, doc, setDoc, updateDoc, onSnapshot, Timestamp,
            collection, addDoc, query, orderBy, limit, getDocs
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCHDzGbXmHNWKL2UtRm57vPRVxZb31dHto",
            authDomain: "long-bao-tool-ai.firebaseapp.com",
            projectId: "long-bao-tool-ai",
            storageBucket: "long-bao-tool-ai.appspot.com",
            messagingSenderId: "259613170671",
            appId: "1:259613170671:web:6fe22467879c01da52b41a",
            measurementId: "G-PS060CSDBC"
        };

        const fbApp = initializeApp(firebaseConfig);
        const auth = getAuth(fbApp);
        const db = getFirestore(fbApp);

        // --- GLOBAL STATE ---
        let currentUserData = null;
        let unsubscribeUser;
        let wasEnergyLow = false;
        let activationTimeout;
        let dataStreamInterval;
        let three, coreAnimationId;

        // --- DOM Elements ---
        const DOMElements = {
            authScreen: document.getElementById('authScreen'),
            aiCoreSelectionScreen: document.getElementById('aiCoreSelectionScreen'),
            activationScreen: document.getElementById('activationScreen'),
            yianCoreScreen: document.getElementById('yianCoreScreen'),
            loginForm: document.getElementById('loginForm'),
            registerForm: document.getElementById('registerForm'),
            showRegisterLink: document.getElementById('showRegisterLink'),
            showLoginLink: document.getElementById('showLoginLink'),
            loginUsernameInput: document.getElementById('login-username'),
            loginPasswordInput: document.getElementById('login-password'),
            loginBtn: document.getElementById('loginBtn'),
            coreOptions: document.querySelectorAll('.core-option'),
            prevCoreBtn: document.getElementById('prev-core-btn'),
            nextCoreBtn: document.getElementById('next-core-btn'),
            mainNextBtn: document.getElementById('main-next-btn'),
            
            // Activation Screen
            core3dContainer: document.getElementById('core-3d-container'),
            activationCoreName: document.getElementById('activation-core-name'),
            activationStatusText: document.getElementById('activation-status-text'),
            activationProgressBar: document.getElementById('activation-progress-bar'),
            cancelActivationBtn: document.getElementById('cancel-activation-btn'),
            systemCheckList: document.getElementById('system-check-list'),
            dataStream: document.getElementById('data-stream'),
            
            // Yian Core Screen
            yianResultText: document.getElementById('yian-result-text'),
            yianSecondaryResultText: document.getElementById('yian-secondary-result-text'),
            yianScanButton: document.getElementById('yian-scan-button'),
            yianExitButton: document.getElementById('yian-exit-button'),
            yianEnergyBarInner: document.getElementById('yian-energy-bar-inner'),
            yianEnergyPercentText: document.getElementById('yian-energy-percent-text'),
            yianSystemLog: document.getElementById('yian-system-log'),
            yianCoreSelector: document.getElementById('yian-core-selector'),
            yianCameraView: document.getElementById('yian-camera-view'),

            // User Info
            userInfoBar: document.getElementById('user-info-bar'),
            userPilotSpan: document.getElementById('user-pilot'),
            userEnergySpan: document.getElementById('user-energy'),
            userAvatarImg: document.getElementById('user-avatar'),
            
            // Modals
            aquariusModal: document.getElementById('aquarius-modal'),
            confirmAquariusCodeBtn: document.getElementById('confirm-aquarius-code'),
            aquariusCodeInput: document.getElementById('aquarius-code-input'),
            aquariusError: document.getElementById('aquarius-error'),
            lowEnergyModal: document.getElementById('low-energy-modal'),
            profileModal: document.getElementById('profile-modal'),

            // Profile
            profileBtn: document.getElementById('profile-btn'),
            profileForm: document.getElementById('profile-form'),
            profileAvatarPreview: document.getElementById('profile-avatar-preview'),
            profileAvatarUrlInput: document.getElementById('profile-avatar-url'),
            profileF168UsernameInput: document.getElementById('profile-f168-username'),
            profilePhoneInput: document.getElementById('profile-phone'),
            profileTabs: document.querySelectorAll('.profile-tab'),
            profileTabContents: document.querySelectorAll('.profile-tab-content'),
            activityLogContainer: document.getElementById('activity-log-container'),
            changePasswordForm: document.getElementById('change-password-form'),

            // Controls
            logoutBtn: document.getElementById('logout-btn'),
        };

        // --- BACKGROUND EFFECTS ---
        function setupMatrixRain() {
            const canvas = document.getElementById('matrix-bg');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');

            let w, h, cols;
            let ypos = [];

            const matrixChars = '日ﾊﾐﾋｰｳｼﾅﾓﾆｻﾜﾂｵﾘｱﾎﾃﾏｹﾒｴｶｷﾑﾕﾗｾﾈｽﾀﾇﾍ1234567890';

            function resizeCanvas() {
                w = canvas.width = window.innerWidth;
                h = canvas.height = window.innerHeight;
                cols = Math.floor(w / 20);
                ypos = Array(cols).fill(0);
            }

            function matrix() {
                ctx.fillStyle = 'rgba(10, 25, 47, 0.1)'; // Fading effect
                ctx.fillRect(0, 0, w, h);

                ctx.fillStyle = '#00ffff'; // Cyan text color
                ctx.font = '15pt monospace';

                ypos.forEach((y, ind) => {
                    const text = matrixChars.charAt(Math.floor(Math.random() * matrixChars.length));
                    const x = ind * 20;
                    ctx.fillText(text, x, y);

                    if (y > 100 + Math.random() * 10000) {
                        ypos[ind] = 0;
                    } else {
                        ypos[ind] = y + 20;
                    }
                });
            }

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas(); // Initial setup
            setInterval(matrix, 50);
        }

        // --- YOUTUBE PLAYER & SOUND ENGINE ---
        let ytPlayer, isYtReady = false, soundsReady = false;
        const sound = {};

        function initializeMedia() {
            window.onYouTubeIframeAPIReady = () => {
                isYtReady = true;
                ytPlayer = new YT.Player('youtube-player', {
                    height: '360', width: '640', videoId: '16GcpkR3rMM',
                    playerVars: { 'autoplay': 1, 'controls': 0, 'loop': 1, 'playlist': '16GcpkR3rMM' },
                    events: { 'onReady': onPlayerReady }
                });
            };
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            document.head.appendChild(tag);

            sound.click = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.05, release: 0.1 } }).toDestination();
            sound.navigate = new Tone.MembraneSynth({ pitchDecay: 0.01, octaves: 2, envelope: { attack: 0.001, decay: 0.2, sustain: 0.01, release: 0.1 } }).toDestination();
            sound.confirm = new Tone.MetalSynth({ frequency: 200, envelope: { attack: 0.001, decay: 0.1, release: 0.05 }, harmonicity: 3.1, modulationIndex: 32, resonance: 4000, octaves: 1.5 }).toDestination();
            sound.error = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.2 } }).toDestination();
            sound.open = new Tone.PluckSynth({ attackNoise: 1, dampening: 4000, resonance: 0.7 }).toDestination();
            sound.typing = new Tone.NoiseSynth({ noise: { type: 'pink' }, envelope: { attack: 0.001, decay: 0.05, sustain: 0 } }).toDestination();
            sound.success = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.001, decay: 0.2, sustain: 0.1, release: 0.2 } }).toDestination();
            sound.boot = new Tone.Synth({ oscillator: { type: 'sawtooth' }, envelope: { attack: 0.5, decay: 0.5, sustain: 0.2, release: 1 } }).toDestination();
        }

        function onPlayerReady(event) {
            event.target.setVolume(50);
            event.target.mute();
            event.target.playVideo();
        }

        function playSound(type, note = 'C4', duration = '8n') {
            if (!soundsReady || !sound[type]) return;
            try {
                if (type === 'typing') {
                    sound[type].triggerAttack();
                } else if (type === 'boot') {
                    sound[type].triggerAttackRelease('C3', '1s');
                } else {
                    sound[type].triggerAttackRelease(note, duration);
                }
            } catch (e) { console.error("Sound play error:", e); }
        }

        const startMedia = async () => {
            if (soundsReady) return;
            await Tone.start();
            soundsReady = true;
            if (isYtReady && ytPlayer && ytPlayer.isMuted()) {
                ytPlayer.unMute();
            }
        };
        document.body.addEventListener('click', startMedia, { once: true });
        document.body.addEventListener('keydown', startMedia, { once: true });

        // --- NOTIFICATION SYSTEM ---
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notification-container');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            container.appendChild(notification);
            setTimeout(() => notification.remove(), 5000);
        }
        
        // --- ACTIVITY LOG ---
        async function logActivity(message) {
            if (!auth.currentUser) return;
            try {
                const logCollectionRef = collection(db, 'users', auth.currentUser.uid, 'activityLog');
                await addDoc(logCollectionRef, {
                    message: message,
                    timestamp: Timestamp.now()
                });
            } catch (error) {
                console.error("Error logging activity:", error);
            }
        }

        async function fetchActivityLog() {
            if (!auth.currentUser) return;
            DOMElements.activityLogContainer.innerHTML = '<p>Đang tải nhật ký...</p>';
            const logCollectionRef = collection(db, 'users', auth.currentUser.uid, 'activityLog');
            const q = query(logCollectionRef, orderBy('timestamp', 'desc'), limit(20));
            try {
                const querySnapshot = await getDocs(q);
                if (querySnapshot.empty) {
                    DOMElements.activityLogContainer.innerHTML = '<p>Không có hoạt động nào.</p>';
                    return;
                }
                let logHTML = '';
                querySnapshot.forEach(doc => {
                    const log = doc.data();
                    const date = log.timestamp.toDate().toLocaleString('vi-VN');
                    logHTML += `<div class="log-entry"><span class="log-timestamp">[${date}]</span>${log.message}</div>`;
                });
                DOMElements.activityLogContainer.innerHTML = logHTML;
            } catch (error) {
                console.error("Error fetching activity log:", error);
                DOMElements.activityLogContainer.innerHTML = '<p>Lỗi tải nhật ký.</p>';
            }
        }

        // --- UI & CORE LOGIC ---
        const decodeText = (element, onComplete = () => {}) => {
            const originalText = element.dataset.text;
            if (!originalText) { element.textContent = element.textContent || ''; return; }
            const chars = '!<>-_\\/[]{}—=+*^?#_';
            let frame = 0;
            const interval = setInterval(() => {
                element.textContent = originalText.split('').map((char, index) => {
                    if(index < frame) return originalText[index];
                    return chars[Math.floor(Math.random() * chars.length)];
                }).join('');
                if(frame >= originalText.length) {
                    clearInterval(interval);
                    onComplete();
                }
                frame++;
            }, 50);
        };

        const startBootSequence = () => {
            decodeText(DOMElements.loginForm.querySelector('h2'));
        };

        let currentCoreIndex = 0;
        function showCore(index) { DOMElements.coreOptions.forEach((o, i) => o.classList.toggle('active', i === index)); }
        
        const startActivationSequence = (coreIndex) => {
            DOMElements.aiCoreSelectionScreen.classList.add('hidden');
            DOMElements.activationScreen.classList.remove('hidden');
            DOMElements.activationScreen.classList.add('visible');

            const coreName = DOMElements.coreOptions[coreIndex].querySelector('h3').textContent;
            logActivity(`Bắt đầu kích hoạt lõi "${coreName}".`);
            DOMElements.activationCoreName.textContent = `LÕI: ${coreName.toUpperCase()}`;
            
            // System Check
            const systems = ['MEMORY', 'GPU CLUSTER', 'QUANTUM CPU', 'NETWORK', 'FIREWALL'];
            DOMElements.systemCheckList.innerHTML = systems.map(s => `<div class="system-check-item">${s}... OFFLINE</div>`).join('');
            
            // Data Stream
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            dataStreamInterval = setInterval(() => {
                let line = '';
                for (let i = 0; i < 30; i++) line += chars.charAt(Math.floor(Math.random() * chars.length));
                const span = document.createElement('span');
                span.textContent = line;
                DOMElements.dataStream.appendChild(span);
                if (DOMElements.dataStream.children.length > 20) DOMElements.dataStream.firstChild.remove();
                playSound('typing');
            }, 100);

            // 3D Animation
            startCoreAnimation(coreIndex);

            const steps = [
                { text: "KHỞI TẠO KIỂM TRA HỆ THỐNG...", duration: 1500, progress: 10, action: () => {} },
                ...systems.map((sys, i) => ({
                    text: `KIỂM TRA ${sys}...`,
                    duration: 800,
                    progress: 10 + (i + 1) * 10,
                    action: () => {
                        const item = document.querySelector(`#system-check-list .system-check-item:nth-child(${i+1})`);
                        if(item) item.innerHTML = `${sys}... <span style="color:var(--success-green)">ONLINE</span>`;
                        playSound('success', 'C5', '16n');
                    }
                })),
                { text: "PHÂN TÍCH CẤU TRÚC LÕI...", duration: 2000, progress: 70, action: () => {} },
                { text: "NẠP GIAO THỨC...", duration: 2000, progress: 90, action: () => {} },
                { text: "KÍCH HOẠT!", duration: 1000, progress: 100, action: () => playSound('boot') },
                { text: "KÍCH HOẠT HOÀN TẤT.", duration: 2000, progress: 100, action: () => {
                     // Logic cho các lõi khác ở đây nếu cần
                     showNotification("Kích hoạt lõi hoàn tất!", "success");
                } }
            ];

            let currentStep = 0;
            const runStep = () => {
                if (currentStep >= steps.length) {
                    clearInterval(dataStreamInterval);
                    return;
                }
                const step = steps[currentStep];
                DOMElements.activationStatusText.textContent = step.text;
                DOMElements.activationProgressBar.style.width = `${step.progress}%`;
                
                activationTimeout = setTimeout(() => {
                    step.action();
                    currentStep++;
                    runStep();
                }, step.duration);
            };

            runStep();
        };

        function startCoreAnimation(coreIndex) {
            if (three) {
                cancelAnimationFrame(coreAnimationId);
                while(three.scene.children.length > 0){ 
                    three.scene.remove(three.scene.children[0]); 
                }
            }

            const container = DOMElements.core3dContainer;
            container.innerHTML = '';
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            let coreObject;
            const light1 = new THREE.PointLight(0x00ffff, 2, 100);
            light1.position.set(0, 5, 5);
            scene.add(light1);

            const light2 = new THREE.PointLight(0xfcee0a, 2, 100);
            light2.position.set(0, -5, -5);
            scene.add(light2);

            if (coreIndex === 0) { // LongBao IV
                const geometry = new THREE.IcosahedronGeometry(1.5, 0);
                const material = new THREE.MeshStandardMaterial({ color: 0xfcee0a, metalness: 0.8, roughness: 0.2, wireframe: true });
                coreObject = new THREE.Mesh(geometry, material);
            } else { // Yian & Aquarius
                const geometry = new THREE.TorusKnotGeometry(1, 0.3, 100, 16);
                const material = new THREE.MeshStandardMaterial({ color: 0xff00ff, metalness: 0.9, roughness: 0.1 });
                coreObject = new THREE.Mesh(geometry, material);
                light1.color.set(0xff00ff);
                light2.color.set(0x00c7ff);
            }
            scene.add(coreObject);
            camera.position.z = 5;

            three = { scene, camera, renderer, coreObject };

            function animate() {
                coreAnimationId = requestAnimationFrame(animate);
                three.coreObject.rotation.x += 0.005;
                three.coreObject.rotation.y += 0.01;
                three.renderer.render(three.scene, three.camera);
            }
            animate();
        }
        
        // --- FIREBASE AUTH & DATA ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                if (unsubscribeUser) unsubscribeUser();
                const userDocRef = doc(db, "users", user.uid);
                unsubscribeUser = onSnapshot(userDocRef, (doc) => {
                    if (doc.exists()) {
                        currentUserData = doc.data();
                        updateUIWithUserData(currentUserData);
                    } else {
                        console.error("User document does not exist for UID:", user.uid);
                        signOut(auth);
                    }
                });
                DOMElements.authScreen.classList.add('fade-out');
                setTimeout(() => {
                    DOMElements.authScreen.classList.add('hidden');
                    DOMElements.aiCoreSelectionScreen.classList.remove('hidden');
                    DOMElements.aiCoreSelectionScreen.classList.add('fade-in');
                    DOMElements.userInfoBar.classList.remove('hidden');
                    decodeText(DOMElements.aiCoreSelectionScreen.querySelector('h1'));
                    showCore(currentCoreIndex);
                }, 500);
            } else {
                if (unsubscribeUser) unsubscribeUser();
                currentUserData = null;
                DOMElements.authScreen.classList.remove('hidden', 'fade-out');
                DOMElements.aiCoreSelectionScreen.classList.add('hidden');
                DOMElements.activationScreen.classList.add('hidden');
                DOMElements.userInfoBar.classList.add('hidden');
                startBootSequence();
            }
        });
        
        function updateUIWithUserData(userData) {
            const energy = userData.energy || 0;
            // Main UI
            DOMElements.userPilotSpan.textContent = `PILOT: ${userData.username.toUpperCase()}`;
            DOMElements.userEnergySpan.textContent = `ENERGY: ${energy}`;
            const avatarUrl = userData.avatarUrl || 'https://placehold.co/50x50/0A192F/00ffff?text=P';
            DOMElements.userAvatarImg.src = avatarUrl;
            DOMElements.userAvatarImg.onerror = () => { DOMElements.userAvatarImg.src = 'https://placehold.co/50x50/0A192F/00ffff?text=P'; };
            DOMElements.userEnergySpan.classList.toggle('high', energy > 70);
            DOMElements.userEnergySpan.classList.toggle('low', energy < 30);
            DOMElements.userInfoBar.classList.toggle('low-energy', energy < 30);
            
            // Yian UI
            DOMElements.yianEnergyBarInner.style.width = `${energy}%`;
            DOMElements.yianEnergyPercentText.textContent = `${Math.round(energy)}%`;

            const isEnergyLow = energy < 30;
            if (isEnergyLow && !wasEnergyLow) {
                DOMElements.lowEnergyModal.classList.remove('hidden');
                playSound('error');
            }
            wasEnergyLow = isEnergyLow;
        }
        
        function getFirebaseErrorMessage(errorCode) {
            switch (errorCode) {
                case 'auth/invalid-email':
                case 'auth/user-not-found':
                case 'auth/wrong-password':
                case 'auth/invalid-credential': return 'SAI TÊN/MẬT KHẨU';
                case 'auth/user-disabled': return 'TÀI KHOẢN BỊ KHÓA';
                case 'auth/email-already-in-use': return 'TÀI KHOẢN ĐÃ TỒN TẠI';
                case 'auth/weak-password': return 'MẬT KHẨU QUÁ YẾU';
                default: return 'LỖI HỆ THỐNG KHÔNG XÁC ĐỊNH';
            }
        }

        // --- EVENT LISTENERS ---
        function setupEventListeners() {
            DOMElements.loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                playSound('click');
                const username = DOMElements.loginUsernameInput.value.trim().toLowerCase();
                const password = DOMElements.loginPasswordInput.value;
                DOMElements.loginBtn.disabled = true;
                try {
                    const fakeEmail = `${username}@longbao-tool.ai`;
                    await signInWithEmailAndPassword(auth, fakeEmail, password);
                    await logActivity("Đăng nhập vào hệ thống.");
                    showNotification("Kết nối thành công! Đang chuyển hướng...", "success");
                } catch (error) {
                    showNotification(getFirebaseErrorMessage(error.code), "error");
                } finally {
                    DOMElements.loginBtn.disabled = false;
                }
            });

            DOMElements.registerForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                playSound('click');
                const username = document.getElementById('register-username').value.trim().toLowerCase();
                const phone = document.getElementById('register-phone').value.trim();
                const password = document.getElementById('register-password').value;
                const registerBtn = document.getElementById('registerBtn');
                if (!username || !phone || !password) {
                    showNotification("YÊU CẦU ĐỦ THÔNG TIN", "error");
                    return;
                }
                registerBtn.disabled = true;
                try {
                    const fakeEmail = `${username}@longbao-tool.ai`;
                    const userCredential = await createUserWithEmailAndPassword(auth, fakeEmail, password);
                    const userDocRef = doc(db, "users", userCredential.user.uid);
                    await setDoc(userDocRef, { 
                        uid: userCredential.user.uid, 
                        username: username, 
                        phoneNumber: phone, 
                        energy: 0,
                        createdAt: Timestamp.now(),
                        avatarUrl: '',
                        f168Username: '',
                        f168UsernameLastChanged: null,
                        f168UsernameChangeCount: 0
                    });
                    await logActivity("Tạo tài khoản thành công.");
                    showNotification("Tài khoản đã được tạo! Vui lòng đăng nhập.", "success");
                    DOMElements.registerForm.classList.add('hidden');
                    DOMElements.loginForm.classList.remove('hidden');
                    decodeText(DOMElements.loginForm.querySelector('h2'));
                } catch (error) {
                    showNotification(getFirebaseErrorMessage(error.code), "error");
                } finally {
                    registerBtn.disabled = false;
                }
            });

            DOMElements.showRegisterLink.addEventListener('click', () => {
                playSound('click');
                DOMElements.loginForm.classList.add('hidden');
                DOMElements.registerForm.classList.remove('hidden');
                decodeText(DOMElements.registerForm.querySelector('h2'));
            });

            DOMElements.showLoginLink.addEventListener('click', () => {
                playSound('click');
                DOMElements.registerForm.classList.add('hidden');
                DOMElements.loginForm.classList.remove('hidden');
                decodeText(DOMElements.loginForm.querySelector('h2'));
            });

            DOMElements.mainNextBtn.addEventListener('click', () => {
                playSound('confirm');
                // Nếu lõi Yian được chọn (index 1), chuyển hướng ngay lập tức.
                if (currentCoreIndex === 1) {
                    window.location.href = 'https://www.soilabai.site/';
                } 
                // Nếu lõi Aquarius được chọn (index 2), hiển thị modal nhập code.
                else if (currentCoreIndex === 2) {
                    DOMElements.aquariusModal.classList.remove('hidden');
                    playSound('open', 'G4');
                } 
                // Đối với các lõi khác, vẫn hiển thị màn hình kích hoạt.
                else {
                    startActivationSequence(currentCoreIndex);
                }
            });

            DOMElements.confirmAquariusCodeBtn.addEventListener('click', () => {
                if (DOMElements.aquariusCodeInput.value.trim() !== '') {
                    playSound('confirm');
                    DOMElements.aquariusModal.classList.add('hidden');
                    startActivationSequence(2); // Start Aquarius loading
                    DOMElements.aquariusCodeInput.value = '';
                    DOMElements.aquariusError.textContent = '';
                } else {
                    playSound('error');
                    DOMElements.aquariusError.textContent = 'MÃ KÍCH HOẠT KHÔNG HỢP LỆ';
                }
            });

            DOMElements.nextCoreBtn.addEventListener('click', () => {
                playSound('navigate', 'E4');
                currentCoreIndex = (currentCoreIndex + 1) % DOMElements.coreOptions.length;
                showCore(currentCoreIndex);
            });

            DOMElements.prevCoreBtn.addEventListener('click', () => {
                playSound('navigate', 'C4');
                currentCoreIndex = (currentCoreIndex - 1 + DOMElements.coreOptions.length) % DOMElements.coreOptions.length;
                showCore(currentCoreIndex);
            });

            DOMElements.cancelActivationBtn.addEventListener('click', () => {
                clearTimeout(activationTimeout);
                clearInterval(dataStreamInterval);
                cancelAnimationFrame(coreAnimationId);
                DOMElements.activationScreen.classList.remove('visible');
                setTimeout(() => {
                    DOMElements.activationScreen.classList.add('hidden');
                    DOMElements.aiCoreSelectionScreen.classList.remove('hidden');
                }, 500);
            });

            DOMElements.logoutBtn.addEventListener('click', () => {
                logActivity("Đăng xuất.");
                signOut(auth);
                showNotification("Đã đăng xuất.", "info");
            });
            
            DOMElements.profileBtn.addEventListener('click', () => {
                if (!currentUserData) return;
                playSound('open');
                DOMElements.profileAvatarUrlInput.value = currentUserData.avatarUrl || '';
                DOMElements.profileAvatarPreview.src = currentUserData.avatarUrl || 'https://placehold.co/100x100/0A192F/00ffff?text=P';
                DOMElements.profileF168UsernameInput.value = currentUserData.f168Username || '';
                DOMElements.profilePhoneInput.value = currentUserData.phoneNumber || '';
                DOMElements.profileTabs.forEach(t => t.classList.remove('active'));
                DOMElements.profileTabContents.forEach(c => c.classList.remove('active'));
                document.querySelector('.profile-tab[data-tab="profile-info"]').classList.add('active');
                document.getElementById('profile-info').classList.add('active');
                DOMElements.profileModal.classList.remove('hidden');
            });

            DOMElements.profileTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.dataset.tab;
                    DOMElements.profileTabs.forEach(t => t.classList.remove('active'));
                    DOMElements.profileTabContents.forEach(c => c.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(target).classList.add('active');
                    if (target === 'profile-log') fetchActivityLog();
                });
            });

            DOMElements.profileForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                // ... Profile update logic
            });

            DOMElements.changePasswordForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const user = auth.currentUser;
                const currentPassword = document.getElementById('current-password').value;
                const newPassword = document.getElementById('new-password').value;
                if (!user || !currentPassword || !newPassword) return;
                const credential = EmailAuthProvider.credential(user.email, currentPassword);
                try {
                    await reauthenticateWithCredential(user, credential);
                    await updatePassword(user, newPassword);
                    await logActivity("Đổi mật khẩu thành công.");
                    showNotification("Mật khẩu đã được thay đổi!", "success");
                    DOMElements.changePasswordForm.reset();
                } catch (error) {
                    showNotification("Lỗi: Mật khẩu cũ không đúng?", "error");
                }
            });
            
            document.querySelectorAll('.close-modal-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    playSound('click');
                    btn.closest('.modal-overlay').classList.add('hidden');
                });
            });

            DOMElements.yianScanButton.addEventListener('click', async () => {
                if (!currentUserData || !auth.currentUser) return;
                const cost = 5; // Yian cost
                if (currentUserData.energy < cost) {
                    showNotification("Không đủ năng lượng!", "error");
                    playSound('error');
                    return;
                }
                
                playSound('confirm');
                const newEnergy = currentUserData.energy - cost;
                const userDocRef = doc(db, "users", auth.currentUser.uid);
                await updateDoc(userDocRef, { energy: newEnergy });
                await logActivity(`Sử dụng Lõi Yian, năng lượng còn lại: ${newEnergy}`);

                DOMElements.yianResultText.textContent = "ĐANG PHÂN TÍCH...";
                DOMElements.yianSecondaryResultText.textContent = "";

                setTimeout(() => {
                    const results = ["CÁI", "CON", "TÀI", "XỈU"];
                    const secondaryResults = ["Long Bảo", "Con Đôi", "Cái Đôi", "Hòa"];
                    const randomResult = results[Math.floor(Math.random() * results.length)];
                    const randomSecondary = secondaryResults[Math.floor(Math.random() * secondaryResults.length)];
                    DOMElements.yianResultText.textContent = `${randomResult}`;
                    DOMElements.yianSecondaryResultText.textContent = `+ ${randomSecondary}`;
                }, 2000);
            });

            DOMElements.yianExitButton.addEventListener('click', () => {
                DOMElements.yianCoreScreen.classList.remove('visible');
                setTimeout(() => {
                    DOMElements.yianCoreScreen.classList.add('hidden');
                    DOMElements.aiCoreSelectionScreen.classList.remove('hidden');
                    DOMElements.aiCoreSelectionScreen.classList.add('fade-in');
                }, 500);
            });
        }

        // --- INITIALIZATION ---
        function init() {
            initializeMedia();
            setupEventListeners(); 
            setupMatrixRain(); // Bắt đầu hiệu ứng Matrix Rain
        }

        init();
    </script>
</body>
</html>
